(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[7502],{7502:(I,p,n)=>{n.r(p),n.d(p,{AppComponent:()=>P});var d=n(1190),u=n(9516);let P=(()=>{class l{title="dashboard";static \u0275fac=function(C){return new(C||l)};static \u0275cmp=u.\u0275\u0275defineComponent({type:l,selectors:[["app-root"]],decls:1,vars:0,template:function(C,h){1&C&&u.\u0275\u0275element(0,"app-home")},dependencies:[d.B],encapsulation:2})}return l})()},1190:(I,p,n)=>{n.d(p,{B:()=>x});var d=n(6748),s=n(1301),l=n(5753),_=n(4209),h=n(919),f=n(3037),m=n(7313),E=n(4931),r=n(3418),t=n(9516),g=n(5217);function D(o,v){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"custom-button",17),t.\u0275\u0275listener("clicked",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext().$implicit,c=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(c.removeFromCart(i))}),t.\u0275\u0275elementEnd()}2&o&&t.\u0275\u0275property("label","REMOVE")("buttonClass","danger")}function T(o,v){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div")(1,"shared-app-card",9)(2,"div",10)(3,"h5",11)(4,"span",12),t.\u0275\u0275pipe(5,"titlecase"),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"titlecase"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"span"),t.\u0275\u0275text(9),t.\u0275\u0275pipe(10,"formatPrice"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(11,"div",13)(12,"p"),t.\u0275\u0275text(13),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(14,"div",14)(15,"custom-button",15),t.\u0275\u0275listener("clicked",function(){const i=t.\u0275\u0275restoreView(e).$implicit,c=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(c.addToCart(i))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(16,D,1,2,"custom-button",16),t.\u0275\u0275elementEnd()()()}if(2&o){const e=v.$implicit,a=t.\u0275\u0275nextContext();t.\u0275\u0275advance(),t.\u0275\u0275property("product",e)("isProductInCart",a.isProductInCart(e)),t.\u0275\u0275advance(3),t.\u0275\u0275property("matTooltip",t.\u0275\u0275pipeBind1(5,9,e.title)),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(7,11,e.title)," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1("( ",t.\u0275\u0275pipeBind1(10,13,e.price)," )"),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(e.description),t.\u0275\u0275advance(2),t.\u0275\u0275property("label",a.isProductInCart(e)?"Go to cart":"ADD TO CART")("route",a.isProductInCart(e)?"/cart":""),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",a.isProductInCart(e))}}let x=(()=>{class o{productService;cartState;cartQuery;cartAkitaService;store;constructor(e,a,i,c,O){this.productService=e,this.cartState=a,this.cartQuery=i,this.cartAkitaService=c,this.store=O}cartItems=[];ngOnInit(){this.store.select(r.selectCartItems).subscribe(e=>{this.cartItems=e}),this.loadProducts(),this.productService.onProductsUpdated().subscribe(()=>{this.loadProducts()})}addToCart=e=>{this.isProductInCart(e)||this.store.dispatch((0,r.addToCart)({product:e}))};removeFromCart(e){this.store.dispatch((0,r.removeFromCart)({productId:e.id}))}isProductInCart(e){return this.cartItems.some(a=>a.id===e.id)}bannerTitle="Welcome to Online Shopping";bannerSubTitle="Buy, sell, and exchange anything";products=[];searchTerm="";filteredProducts=[];prevSearch="";ngDoCheck(){this.searchTerm!==this.prevSearch?(this.prevSearch=this.searchTerm,this.filteredProducts=this.products.filter(e=>e.title.toLowerCase().includes(this.searchTerm.toLowerCase())),window.dispatchEvent(new CustomEvent("searchUpdated",{detail:{searchTerm:this.searchTerm,totalCount:this.filteredProducts.length}}))):this.products=[...this.products]}loadProducts(){this.productService.getProducts().subscribe(e=>{this.products=e.map(a=>({...a,images:(0,r.normalizeImages)(a.images)})),this.filteredProducts=this.products})}static \u0275fac=function(a){return new(a||o)(t.\u0275\u0275directiveInject(r.ProductService),t.\u0275\u0275directiveInject(r.CartStoreService),t.\u0275\u0275directiveInject(r.AkitaCartQuery),t.\u0275\u0275directiveInject(r.CartService),t.\u0275\u0275directiveInject(g.Store))};static \u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["app-home"]],decls:12,vars:2,consts:[["searchField",""],["cardContainer",""],[2,"padding-left","2rem"],[2,"display","flex","gap","1rem"],["appearance","outline",1,"small",2,"padding-top","2rem"],["placeholder","Search products...","matInput","","type","text",3,"ngModelChange","ngModel"],["matSuffix",""],[1,"card-container"],[4,"ngFor","ngForOf"],[3,"product","isProductInCart"],["card-header",""],[2,"padding","1rem","display","flex","gap","0.5rem"],["matTooltipPosition","above",1,"product-title",3,"matTooltip"],["card-body",""],["card-actions","",1,"card-actions"],[3,"clicked","label","route"],[3,"label","buttonClass","clicked",4,"ngIf"],[3,"clicked","label","buttonClass"]],template:function(a,i){if(1&a){const c=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",2)(1,"div",3)(2,"h2"),t.\u0275\u0275text(3,"Products"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"mat-form-field",4,0)(6,"input",5),t.\u0275\u0275twoWayListener("ngModelChange",function(M){return t.\u0275\u0275restoreView(c),t.\u0275\u0275twoWayBindingSet(i.searchTerm,M)||(i.searchTerm=M),t.\u0275\u0275resetView(M)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"mat-icon",6),t.\u0275\u0275text(8,"search"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(9,"div",7,1),t.\u0275\u0275template(11,T,17,15,"div",8),t.\u0275\u0275elementEnd()()}2&a&&(t.\u0275\u0275advance(6),t.\u0275\u0275twoWayProperty("ngModel",i.searchTerm),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngForOf",i.filteredProducts))},dependencies:[d.FormsModule,d.DefaultValueAccessor,d.NgControlStatus,d.NgModel,s.MatFormFieldModule,s.MatFormField,s.MatSuffix,l.MatInputModule,l.MatInput,_.MatIconModule,_.MatIcon,h.MatDividerModule,f.MatButtonModule,m.CommonModule,m.NgForOf,m.NgIf,m.TitleCasePipe,r.CardComponent,E.MatTooltipModule,E.MatTooltip,r.CustomButtonComponent,r.FormatPricePipe],styles:["flexer[_ngcontent-%COMP%]{display:flex;flex-direction:column}h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:800;padding-top:2rem}.card[_ngcontent-%COMP%]{display:flex;max-width:20rem}.card-container[_ngcontent-%COMP%]{margin:1rem;display:flex;gap:1.5rem;flex-wrap:wrap;justify-content:baseline}mat-form-field.small[_ngcontent-%COMP%]{--mat-form-field-container-height: 30px;--mat-form-field-container-vertical-padding: 4px}.card-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}img[_ngcontent-%COMP%]{width:250px;height:250px;padding:1rem}.product-title[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:6rem;display:block}p[_ngcontent-%COMP%]{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;text-overflow:ellipsis;line-clamp:3;width:15rem;height:4rem;margin:.5rem 0}mat-card[_ngcontent-%COMP%]{display:flex;align-items:center}@media (max-width: 768px){.card-container[_ngcontent-%COMP%]{justify-content:center}}"]})}return o})()}}]);