(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[9265],{9265:(O,F,o)=>{var g=o(3893),t=o(9516),x=o(8754),P=o(5744),y=o(8374),p=o(5217),i=o(3418);const S={providers:[(0,t.provideZoneChangeDetection)({eventCoalescing:!0}),(0,x.provideRouter)([]),(0,P.provideHttpClient)(),(0,y.provideAnimationsAsync)(),(0,p.provideStore)({cart:i.cartReducer})]};var s=o(6748),l=o(1301),u=o(5753),h=o(4209),I=o(919),b=o(3037),d=o(7313),v=o(4931);function T(n,C){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"custom-button",17),t.\u0275\u0275listener("clicked",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext().$implicit,c=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(c.removeFromCart(a))}),t.\u0275\u0275elementEnd()}2&n&&t.\u0275\u0275property("label","REMOVE")("buttonClass","danger")}function _(n,C){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div")(1,"shared-app-card",9)(2,"div",10)(3,"h5",11)(4,"span",12),t.\u0275\u0275pipe(5,"titlecase"),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"titlecase"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"span"),t.\u0275\u0275text(9),t.\u0275\u0275pipe(10,"formatPrice"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(11,"div",13)(12,"p"),t.\u0275\u0275text(13),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(14,"div",14)(15,"custom-button",15),t.\u0275\u0275listener("clicked",function(){const a=t.\u0275\u0275restoreView(e).$implicit,c=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(c.addToCart(a))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(16,T,1,2,"custom-button",16),t.\u0275\u0275elementEnd()()()}if(2&n){const e=C.$implicit,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(),t.\u0275\u0275property("product",e)("isProductInCart",r.isProductInCart(e)),t.\u0275\u0275advance(3),t.\u0275\u0275property("matTooltip",t.\u0275\u0275pipeBind1(5,9,e.title)),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(7,11,e.title)," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1("( ",t.\u0275\u0275pipeBind1(10,13,e.price)," )"),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(e.description),t.\u0275\u0275advance(2),t.\u0275\u0275property("label",r.isProductInCart(e)?"Go to cart":"ADD TO CART")("route",r.isProductInCart(e)?"/cart":""),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",r.isProductInCart(e))}}let w=(()=>{class n{productService;cartState;cartQuery;cartAkitaService;store;constructor(e,r,a,c,f){this.productService=e,this.cartState=r,this.cartQuery=a,this.cartAkitaService=c,this.store=f}cartItems=[];ngOnInit(){this.store.select(i.selectCartItems).subscribe(e=>{this.cartItems=e}),this.loadProducts(),this.productService.onProductsUpdated().subscribe(()=>{this.loadProducts()})}addToCart=e=>{this.isProductInCart(e)||this.store.dispatch((0,i.addToCart)({product:e}))};removeFromCart(e){this.store.dispatch((0,i.removeFromCart)({productId:e.id}))}isProductInCart(e){return this.cartItems.some(r=>r.id===e.id)}bannerTitle="Welcome to Online Shopping";bannerSubTitle="Buy, sell, and exchange anything";products=[];searchTerm="";filteredProducts=[];prevSearch="";ngDoCheck(){this.searchTerm!==this.prevSearch?(this.prevSearch=this.searchTerm,this.filteredProducts=this.products.filter(e=>e.title.toLowerCase().includes(this.searchTerm.toLowerCase())),window.dispatchEvent(new CustomEvent("searchUpdated",{detail:{searchTerm:this.searchTerm,totalCount:this.filteredProducts.length}}))):this.products=[...this.products]}loadProducts(){this.productService.getProducts().subscribe(e=>{this.products=e.map(r=>({...r,images:(0,i.normalizeImages)(r.images)})),this.filteredProducts=this.products})}static \u0275fac=function(r){return new(r||n)(t.\u0275\u0275directiveInject(i.ProductService),t.\u0275\u0275directiveInject(i.CartStoreService),t.\u0275\u0275directiveInject(i.AkitaCartQuery),t.\u0275\u0275directiveInject(i.CartService),t.\u0275\u0275directiveInject(p.Store))};static \u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-home"]],decls:12,vars:2,consts:[["searchField",""],["cardContainer",""],[2,"padding-left","2rem"],[2,"display","flex","gap","1rem"],["appearance","outline",1,"small",2,"padding-top","2rem"],["placeholder","Search products...","matInput","","type","text",3,"ngModelChange","ngModel"],["matSuffix",""],[1,"card-container"],[4,"ngFor","ngForOf"],[3,"product","isProductInCart"],["card-header",""],[2,"padding","1rem","display","flex","gap","0.5rem"],["matTooltipPosition","above",1,"product-title",3,"matTooltip"],["card-body",""],["card-actions","",1,"card-actions"],[3,"clicked","label","route"],[3,"label","buttonClass","clicked",4,"ngIf"],[3,"clicked","label","buttonClass"]],template:function(r,a){if(1&r){const c=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",2)(1,"div",3)(2,"h2"),t.\u0275\u0275text(3,"Products"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"mat-form-field",4,0)(6,"input",5),t.\u0275\u0275twoWayListener("ngModelChange",function(m){return t.\u0275\u0275restoreView(c),t.\u0275\u0275twoWayBindingSet(a.searchTerm,m)||(a.searchTerm=m),t.\u0275\u0275resetView(m)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"mat-icon",6),t.\u0275\u0275text(8,"search"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(9,"div",7,1),t.\u0275\u0275template(11,_,17,15,"div",8),t.\u0275\u0275elementEnd()()}2&r&&(t.\u0275\u0275advance(6),t.\u0275\u0275twoWayProperty("ngModel",a.searchTerm),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngForOf",a.filteredProducts))},dependencies:[s.FormsModule,s.DefaultValueAccessor,s.NgControlStatus,s.NgModel,l.MatFormFieldModule,l.MatFormField,l.MatSuffix,u.MatInputModule,u.MatInput,h.MatIconModule,h.MatIcon,I.MatDividerModule,b.MatButtonModule,d.CommonModule,d.NgForOf,d.NgIf,d.TitleCasePipe,i.CardComponent,v.MatTooltipModule,v.MatTooltip,i.CustomButtonComponent,i.FormatPricePipe],styles:["flexer[_ngcontent-%COMP%]{display:flex;flex-direction:column}h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:800;padding-top:2rem}.card[_ngcontent-%COMP%]{display:flex;max-width:20rem}.card-container[_ngcontent-%COMP%]{margin:1rem;display:flex;gap:1.5rem;flex-wrap:wrap;justify-content:baseline}mat-form-field.small[_ngcontent-%COMP%]{--mat-form-field-container-height: 30px;--mat-form-field-container-vertical-padding: 4px}.card-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}img[_ngcontent-%COMP%]{width:250px;height:250px;padding:1rem}.product-title[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:6rem;display:block}p[_ngcontent-%COMP%]{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;text-overflow:ellipsis;line-clamp:3;width:15rem;height:4rem;margin:.5rem 0}mat-card[_ngcontent-%COMP%]{display:flex;align-items:center}@media (max-width: 768px){.card-container[_ngcontent-%COMP%]{justify-content:center}}"]})}return n})();(0,g.bootstrapApplication)((()=>{class n{title="dashboard";static \u0275fac=function(r){return new(r||n)};static \u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,a){1&r&&t.\u0275\u0275element(0,"app-home")},dependencies:[w],encapsulation:2})}return n})(),S).catch(n=>console.error(n))}}]);